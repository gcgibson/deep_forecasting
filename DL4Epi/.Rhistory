source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
v
forecasts
View(forecasts)
View(forecasts)
typeof(forecasts)
c(forecasts)
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
trained_model_path
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
trained_model_path
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
trained_model_path
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
source('~/deep_forecasting/run.R')
trained_model_path
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model,save_name,NULL,NULL)
source('~/deep_forecasting/run.R')
test.data <- train_dl(data,adjacency_matrix,train_size,valid_size,model,save_name)
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model,save_name,NULL,NULL)
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model,save_name,NULL,NULL)
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model_name,save_name,NULL,NULL)
model_name <- "CNNRNN_Res"
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model_name,save_name,NULL,NULL)
source('~/deep_forecasting/run.R')
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model_name,save_name,NULL,NULL)
forecasts
dim(forecasts)
forecasts
View(forecasts)
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model_name,save_name,NULL,NULL)
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model_name,save_name,NULL,NULL)
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model_name,save_name,NULL,NULL)
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model_name,save_name,NULL,NULL)
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model_name,save_name,NULL,NULL)
py_to_r(forecasts)
View(py_to_r(forecasts))
source('~/deep_forecasting/run.R')
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model_name,save_name,NULL,NULL)
source('~/deep_forecasting/run.R')
library(tidyverse)
library(ForecastFramework)
#theme_set(theme_bw())
library(reticulate)
use_python("/Users/gcgibson/anaconda/bin/python2.7")
source_python("main.py")
data <- "./training_data.txt"
adjacency_matrix <- "./GER_states_adjacency.txt"
epochs <- 100
train_size <- 0.6
valid_size <- 0.2
save_name <- "tmp"
model_name <- "CNNRNN_Res"
test.data <- train_dl(data,adjacency_matrix,train_size,valid_size,model_name,save_name)
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model_name,save_name,NULL,NULL)
test.data <- train_dl(data,adjacency_matrix,train_size,valid_size,model_name,save_name)
library(tidyverse)
library(ForecastFramework)
#theme_set(theme_bw())
library(reticulate)
use_python("/Users/gcgibson/anaconda/bin/python2.7")
source_python("main.py")
data <- "./training_data.txt"
adjacency_matrix <- "./GER_states_adjacency.txt"
epochs <- 100
train_size <- 0.6
valid_size <- 0.2
save_name <- "tmp"
model_name <- "CNNRNN_Res"
test.data <- train_dl(data,adjacency_matrix,train_size,valid_size,model_name,save_name)
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model_name,save_name,NULL,NULL)
source('~/deep_forecasting/run.R')
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model_name,save_name,NULL,NULL)
library(tidyverse)
library(ForecastFramework)
#theme_set(theme_bw())
library(reticulate)
use_python("/Users/gcgibson/anaconda/bin/python2.7")
source_python("main.py")
data <- "./training_data.txt"
adjacency_matrix <- "./GER_states_adjacency.txt"
epochs <- 100
train_size <- 0.6
valid_size <- 0.2
save_name <- "tmp"
model_name <- "CNNRNN_Res"
forecasts <- test(data,adjacency_matrix,train_size,valid_size,model_name,save_name,NULL,NULL)
forecasts
forecasts
library(ForecastFramework)
forecasts
library(R6)
library(forecast)
library(dplyr)
library(ggplot2)
source('~/deep_forecasting/DL4Epi/main.R')
library(ForecastFramework)
library(dplyr)
## source model code
#source("models/ContestModel.R")
#source("models/sarimaTD-model.R")
source("main.R")
source('~/deep_forecasting/DL4Epi/eval.R')
### load training data
training_data <- readRDS("training_data.rds")
first_season_for_fitting <- "2010/2011"
## source model code
#source("models/ContestModel.R")
#source("models/sarimaTD-model.R")
source("main.R")
THIS_MODEL_FITS_ONCE <- TRUE
MODEL_ABBR <- "DL4EPI"
STEPS <- 6
### load training data
training_data <- readRDS("training_data.rds")
first_season_for_fitting <- "2010/2011"
eval_season <- "2015/2016"
last_season <- "2014/2015"
### training evaluation for once-fit model
if(THIS_MODEL_FITS_ONCE){
## subset data up to (not inclusive) week one of season s
first_fitting_week <- list(season=first_season_for_fitting, season.week=1)
last_fitting_week <- list(season=last_season, season.week=52)
first_col_idx <- which(training_data$colData$season.week==first_fitting_week$season.week & training_data$colData$season==first_fitting_week$season)
last_col_idx <- which(training_data$colData$season.week==last_fitting_week$season.week & training_data$colData$season==last_fitting_week$season)
once_training_data <- training_data$subset(cols = first_col_idx:last_col_idx, mutate = FALSE)
##  initialize model
## TODO: need to make this line be automatically called
this_model <- main$new()
##  fit model to data
this_model$fit(once_training_data)
##   foreach week in season s, make forecast and save
for(sw in 1:52){
## make data to forecast from
last_col_idx <- which(training_data$colData$season.week==sw & training_data$colData$season==eval_season)
tmp_timezero <- list(
year = training_data$colData$year[last_col_idx],
epiweek = training_data$colData$week[last_col_idx]
)
tmp_forecast_data <- training_data$subset(cols = first_col_idx:last_col_idx, mutate = FALSE)
## make forecast
tmp_forecast <- this_model$forecast(tmp_forecast_data, steps=STEPS)
## create, rbind tidy forecast data
tmp_fcast_data <- gather_forecast(tmp_forecast, tmp_timezero)
if(exists("fcast_data")) {
fcast_data <- bind_rows(fcast_data, tmp_fcast_data)
} else {
fcast_data <- tmp_fcast_data
}
}
}
##  initialize model
## TODO: need to make this line be automatically called
this_model <- DL4EPI$new()
## source model code
source("ContestModel.R")
source('~/deep_forecasting/DL4Epi/eval.R')
#source("models/sarimaTD-model.R")
source("main.R")
THIS_MODEL_FITS_ONCE <- TRUE
MODEL_ABBR <- "DL4EPI"
STEPS <- 6
### load training data
training_data <- readRDS("training_data.rds")
first_season_for_fitting <- "2010/2011"
eval_season <- "2015/2016"
last_season <- "2014/2015"
### training evaluation for once-fit model
if(THIS_MODEL_FITS_ONCE){
## subset data up to (not inclusive) week one of season s
first_fitting_week <- list(season=first_season_for_fitting, season.week=1)
last_fitting_week <- list(season=last_season, season.week=52)
first_col_idx <- which(training_data$colData$season.week==first_fitting_week$season.week & training_data$colData$season==first_fitting_week$season)
last_col_idx <- which(training_data$colData$season.week==last_fitting_week$season.week & training_data$colData$season==last_fitting_week$season)
once_training_data <- training_data$subset(cols = first_col_idx:last_col_idx, mutate = FALSE)
##  initialize model
## TODO: need to make this line be automatically called
this_model <- DL4EPI$new()
##  fit model to data
this_model$fit(once_training_data)
##   foreach week in season s, make forecast and save
for(sw in 1:52){
## make data to forecast from
last_col_idx <- which(training_data$colData$season.week==sw & training_data$colData$season==eval_season)
tmp_timezero <- list(
year = training_data$colData$year[last_col_idx],
epiweek = training_data$colData$week[last_col_idx]
)
tmp_forecast_data <- training_data$subset(cols = first_col_idx:last_col_idx, mutate = FALSE)
## make forecast
tmp_forecast <- this_model$forecast(tmp_forecast_data, steps=STEPS)
## create, rbind tidy forecast data
tmp_fcast_data <- gather_forecast(tmp_forecast, tmp_timezero)
if(exists("fcast_data")) {
fcast_data <- bind_rows(fcast_data, tmp_fcast_data)
} else {
fcast_data <- tmp_fcast_data
}
}
}
## subset data up to (not inclusive) week one of season s
first_fitting_week <- list(season=first_season_for_fitting, season.week=1)
last_fitting_week <- list(season=last_season, season.week=52)
first_col_idx <- which(training_data$colData$season.week==first_fitting_week$season.week & training_data$colData$season==first_fitting_week$season)
last_col_idx <- which(training_data$colData$season.week==last_fitting_week$season.week & training_data$colData$season==last_fitting_week$season)
once_training_data <- training_data$subset(cols = first_col_idx:last_col_idx, mutate = FALSE)
##  initialize model
## TODO: need to make this line be automatically called
this_model <- DL4EPI$new()
##  fit model to data
this_model$fit(once_training_data)
once_training_data
##  fit model to data
this_model$fit(once_training_data)
source('~/deep_forecasting/DL4Epi/eval.R')
##  fit model to data
this_model$fit(once_training_data)
#source("models/sarimaTD-model.R")
source("main.R")
THIS_MODEL_FITS_ONCE <- TRUE
MODEL_ABBR <- "DL4EPI"
STEPS <- 6
### load training data
training_data <- readRDS("training_data.rds")
first_season_for_fitting <- "2010/2011"
eval_season <- "2015/2016"
last_season <- "2014/2015"
### training evaluation for once-fit model
if(THIS_MODEL_FITS_ONCE){
## subset data up to (not inclusive) week one of season s
first_fitting_week <- list(season=first_season_for_fitting, season.week=1)
last_fitting_week <- list(season=last_season, season.week=52)
first_col_idx <- which(training_data$colData$season.week==first_fitting_week$season.week & training_data$colData$season==first_fitting_week$season)
last_col_idx <- which(training_data$colData$season.week==last_fitting_week$season.week & training_data$colData$season==last_fitting_week$season)
once_training_data <- training_data$subset(cols = first_col_idx:last_col_idx, mutate = FALSE)
##  initialize model
## TODO: need to make this line be automatically called
this_model <- DL4EPI$new()
##  fit model to data
this_model$fit(once_training_data)
##   foreach week in season s, make forecast and save
for(sw in 1:52){
## make data to forecast from
last_col_idx <- which(training_data$colData$season.week==sw & training_data$colData$season==eval_season)
tmp_timezero <- list(
year = training_data$colData$year[last_col_idx],
epiweek = training_data$colData$week[last_col_idx]
)
tmp_forecast_data <- training_data$subset(cols = first_col_idx:last_col_idx, mutate = FALSE)
## make forecast
tmp_forecast <- this_model$forecast(tmp_forecast_data, steps=STEPS)
## create, rbind tidy forecast data
tmp_fcast_data <- gather_forecast(tmp_forecast, tmp_timezero)
if(exists("fcast_data")) {
fcast_data <- bind_rows(fcast_data, tmp_fcast_data)
} else {
fcast_data <- tmp_fcast_data
}
}
}
if(!THIS_MODEL_FITS_ONCE){
### training process for each-fit model
## foreach season s in training seasons
##   foreach week in season s
##      fit model to data up to (not inclusive) week 1 of training season s
##      make forecast
##      rbind tidy forecast data
}
source('~/deep_forecasting/DL4Epi/main.R')
source('~/deep_forecasting/DL4Epi/eval.R')
##  fit model to data
this_model$fit(once_training_data)
#source("models/sarimaTD-model.R")
source("main.R")
##  initialize model
## TODO: need to make this line be automatically called
this_model <- DL4EPI$new()
##  fit model to data
this_model$fit(once_training_data)
source('~/deep_forecasting/DL4Epi/main.R')
source('~/deep_forecasting/DL4Epi/main.R')
source('~/deep_forecasting/DL4Epi/eval.R')
library(ForecastFramework)
library(dplyr)
source("code/forecast-utils.R") ## helper functions for tidying forecast data
## source model code
source("ContestModel.R")
#source("models/sarimaTD-model.R")
source("main.R")
THIS_MODEL_FITS_ONCE <- TRUE
MODEL_ABBR <- "DL4EPI"
STEPS <- 6
### load training data
training_data <- readRDS("training_data.rds")
first_season_for_fitting <- "2010/2011"
eval_season <- "2015/2016"
last_season <- "2014/2015"
### training evaluation for once-fit model
if(THIS_MODEL_FITS_ONCE){
## subset data up to (not inclusive) week one of season s
first_fitting_week <- list(season=first_season_for_fitting, season.week=1)
last_fitting_week <- list(season=last_season, season.week=52)
first_col_idx <- which(training_data$colData$season.week==first_fitting_week$season.week & training_data$colData$season==first_fitting_week$season)
last_col_idx <- which(training_data$colData$season.week==last_fitting_week$season.week & training_data$colData$season==last_fitting_week$season)
once_training_data <- training_data$subset(cols = first_col_idx:last_col_idx, mutate = FALSE)
##  initialize model
## TODO: need to make this line be automatically called
this_model <- DL4EPI$new()
##  fit model to data
this_model$fit(once_training_data)
##   foreach week in season s, make forecast and save
for(sw in 1:52){
## make data to forecast from
last_col_idx <- which(training_data$colData$season.week==sw & training_data$colData$season==eval_season)
tmp_timezero <- list(
year = training_data$colData$year[last_col_idx],
epiweek = training_data$colData$week[last_col_idx]
)
tmp_forecast_data <- training_data$subset(cols = first_col_idx:last_col_idx, mutate = FALSE)
## make forecast
tmp_forecast <- this_model$forecast(tmp_forecast_data, steps=STEPS)
## create, rbind tidy forecast data
tmp_fcast_data <- gather_forecast(tmp_forecast, tmp_timezero)
if(exists("fcast_data")) {
fcast_data <- bind_rows(fcast_data, tmp_fcast_data)
} else {
fcast_data <- tmp_fcast_data
}
}
}
## subset data up to (not inclusive) week one of season s
first_fitting_week <- list(season=first_season_for_fitting, season.week=1)
last_fitting_week <- list(season=last_season, season.week=52)
first_col_idx <- which(training_data$colData$season.week==first_fitting_week$season.week & training_data$colData$season==first_fitting_week$season)
last_col_idx <- which(training_data$colData$season.week==last_fitting_week$season.week & training_data$colData$season==last_fitting_week$season)
once_training_data <- training_data$subset(cols = first_col_idx:last_col_idx, mutate = FALSE)
##  initialize model
## TODO: need to make this line be automatically called
this_model <- DL4EPI$new()
##  fit model to data
this_model$fit(once_training_data)
print (y_ts)
source('~/deep_forecasting/DL4Epi/main.R')
source('~/deep_forecasting/DL4Epi/main.R')
#source("models/sarimaTD-model.R")
source("main.R")
##  fit model to data
this_model$fit(once_training_data)
##  fit model to data
this_model$fit(once_training_data)
library(ForecastFramework)
library(dplyr)
source("code/forecast-utils.R") ## helper functions for tidying forecast data
## source model code
source("ContestModel.R")
#source("models/sarimaTD-model.R")
source("main.R")
THIS_MODEL_FITS_ONCE <- TRUE
MODEL_ABBR <- "DL4EPI"
STEPS <- 6
### load training data
training_data <- readRDS("training_data.rds")
first_season_for_fitting <- "2010/2011"
eval_season <- "2015/2016"
last_season <- "2014/2015"
### training evaluation for once-fit model
if(THIS_MODEL_FITS_ONCE){
## subset data up to (not inclusive) week one of season s
first_fitting_week <- list(season=first_season_for_fitting, season.week=1)
last_fitting_week <- list(season=last_season, season.week=52)
first_col_idx <- which(training_data$colData$season.week==first_fitting_week$season.week & training_data$colData$season==first_fitting_week$season)
last_col_idx <- which(training_data$colData$season.week==last_fitting_week$season.week & training_data$colData$season==last_fitting_week$season)
once_training_data <- training_data$subset(cols = first_col_idx:last_col_idx, mutate = FALSE)
##  initialize model
## TODO: need to make this line be automatically called
this_model <- DL4EPI$new()
##  fit model to data
this_model$fit(once_training_data)
##   foreach week in season s, make forecast and save
for(sw in 1:52){
## make data to forecast from
last_col_idx <- which(training_data$colData$season.week==sw & training_data$colData$season==eval_season)
tmp_timezero <- list(
year = training_data$colData$year[last_col_idx],
epiweek = training_data$colData$week[last_col_idx]
)
tmp_forecast_data <- training_data$subset(cols = first_col_idx:last_col_idx, mutate = FALSE)
## make forecast
tmp_forecast <- this_model$forecast(tmp_forecast_data, steps=STEPS)
## create, rbind tidy forecast data
tmp_fcast_data <- gather_forecast(tmp_forecast, tmp_timezero)
if(exists("fcast_data")) {
fcast_data <- bind_rows(fcast_data, tmp_fcast_data)
} else {
fcast_data <- tmp_fcast_data
}
}
}
##  initialize model
## TODO: need to make this line be automatically called
this_model <- DL4EPI$new()
##  fit model to data
this_model$fit(once_training_data)
source('~/deep_forecasting/DL4Epi/main.R')
source('~/deep_forecasting/DL4Epi/eval.R')
source('~/deep_forecasting/DL4Epi/main.R')
source('~/deep_forecasting/DL4Epi/eval.R')
#source("models/sarimaTD-model.R")
source("main.R")
##  initialize model
## TODO: need to make this line be automatically called
this_model <- DL4EPI$new()
##  fit model to data
this_model$fit(once_training_data)
source('~/deep_forecasting/DL4Epi/main.R')
source('~/deep_forecasting/DL4Epi/main.R')
#source("models/sarimaTD-model.R")
source("main.R")
##  initialize model
## TODO: need to make this line be automatically called
this_model <- DL4EPI$new()
##  fit model to data
this_model$fit(once_training_data)
source('~/deep_forecasting/DL4Epi/main.R')
source('~/deep_forecasting/DL4Epi/main.R')
library(ForecastFramework)
library(dplyr)
source("code/forecast-utils.R") ## helper functions for tidying forecast data
## source model code
source("ContestModel.R")
#source("models/sarimaTD-model.R")
source("main.R")
THIS_MODEL_FITS_ONCE <- TRUE
MODEL_ABBR <- "DL4EPI"
STEPS <- 6
### load training data
training_data <- readRDS("training_data.rds")
first_season_for_fitting <- "2010/2011"
eval_season <- "2015/2016"
last_season <- "2014/2015"
##  initialize model
## TODO: need to make this line be automatically called
this_model <- DL4EPI$new()
##  fit model to data
this_model$fit(once_training_data)
source('~/deep_forecasting/DL4Epi/main.R')
source('~/deep_forecasting/DL4Epi/main.R')
source('~/deep_forecasting/DL4Epi/eval.R')
source('~/deep_forecasting/DL4Epi/eval.R')
##  fit model to data
this_model$fit(once_training_data)
source('~/deep_forecasting/DL4Epi/main.R')
source('~/deep_forecasting/DL4Epi/eval.R')
source('~/deep_forecasting/DL4Epi/main.R')
source('~/deep_forecasting/DL4Epi/eval.R')
source('~/deep_forecasting/DL4Epi/main.R')
source('~/deep_forecasting/DL4Epi/eval.R')
